language: android

env:
  global:
    - ADB_INSTALL_TIMEOUT=8

android:
  components:
    - tools
    - platform-tools
    
before_install:
 - chmod +x gradlew
 - android-wait-for-emulator
 # Download SDK:
 - yes | sdkmanager "tools" &>/dev/null
 - yes | sdkmanager "platform-tools" &>/dev/null
 - yes | sdkmanager "platforms;android-28" &>/dev/null
 # Update remaining dependencies and accept licenses
 - yes | sdkmanager --update &>/dev/null
 - yes | sdkmanager --licenses &>/dev/null
 # Setup emulator
 - echo "no" | avdmanager create avd --force -n test -k "system-images;android-19;default;armeabi-v7a" &>/dev/null
 - $ANDROID_HOME/emulator/emulator -avd test -no-audio -no-window & &>/dev/null
